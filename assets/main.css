/* =CSS (main.css) */
/* =========================================================
   1. Global Design Tokens
   ========================================================= */
:root {
  /* Core sizes */
  --header-h: 64px;
  --radius: 18px;
  --action-h: 38px;

  /* Dark theme base */
  --bg: #000000;
  --card: #121621;
  --text: #e9eef7;
  --muted: #cfcfcf;
  --line: rgba(255, 255, 255, 0.1);

  /* Brand hues */
  --brand: #b5dbff;
  --accent: #a2f0a8;
  --violet: #d0c1ff;
  --amber: #ffdea1;

  /* UI surfaces */
  --chip-bg: #121621;   --chip-border: #1f2430;
  --search-bg: #121621; --search-border: #1f2430;
  --pill-bg: #1a1f2c;   --pill-border: #263043; --pill-text: #cfd6e3;
  --btn-bg: #182032;    --btn-border: #253149; --btn-text: #dbe6ff;
  --details-bg: #0f1320;--details-border: #1c2331; --details-text: #cfd6e3;
  --code-bg: #0b0f19;   --code-border: #1a2233; --code-text: #cfe3ff;
  --bubble-bg: #0f1320; --bubble-border: #1c2331; --bubble-text: #cfd6e3;

  /* Shadows */
  --shadow: 0 8px 25px rgba(0, 0, 0, 0.25);

  /* Vibrant gradient stops */
  --g1: #4ea9ff;
  --g2: #7ee787;
  --g3: #a78bfa;
}

/* Light theme overrides */
:root[data-theme="light"] {
  --bg: #ffffff;
  --card: #ffffff;
  --text: #0b1220;
  --muted: #4b5563;
  --line: #e5e9f2;

  --brand: #fbffec;
  --accent: #b2ffce;
  --violet: #b7fffb;
  --amber: #fffbd6;

  --chip-bg: #ffffff;   --chip-border: #e5e9f2;
  --search-bg: #ffffff; --search-border: #e5e9f2;
  --pill-bg: #eef2ff;   --pill-border: #dbe2ff; --pill-text: #27356b;
  --btn-bg: #eef2ff;    --btn-border: #dbe2ff; --btn-text: #1e2a5a;
  --details-bg: #f7f9fd;--details-border: #e6ebf5; --details-text: #21304f;
  --code-bg: #0f172a;   --code-border: #0b1220; --code-text: #e2e8f0;

  --bubble-bg: #f7f9fd; --bubble-border: #e6ebf5; --bubble-text: #21304f;
  --shadow: 0 8px 30px rgba(0, 0, 0, 0.247);
}

/* =========================================================
   2. Base & Animation
   ========================================================= */
* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Inter, Roboto, Ubuntu, Arial, sans-serif;
  line-height: 1.65;
  padding-top: var(--header-h);
  min-height: 100vh;
  
  /* Dark Base Color */
  background-color: var(--bg);
  background-attachment: fixed; 

  /* =========================================
     THE BACKGROUND STACK
     ========================================= */
  background-image:
    /* 1. Deep Blue */
    radial-gradient(1800px 1000px at 70% -15%, rgb(138, 20, 255) 0%, rgba(179, 102, 255, 0.45) 50%, transparent 100%),
    /* 2. Violet */
    radial-gradient(1800px 1000px at 60% 20%, rgba(181, 20, 255, 0.82) 0%, rgba(255, 0, 242, 0.288) 55%, transparent 100%),
    /* 3. Cyan */
    radial-gradient(1700px 920px at 40% 40%, rgb(51, 231, 255) 0%, rgba(51, 230, 255, 0.35) 55%, transparent 100%),
    /* 4. Indigo */
    radial-gradient(1300px 900px at 10% 20%, rgba(153, 0, 255, 0.705) 0%, rgba(100, 80, 255, 0.38) 55%, transparent 100%),
    /* 5. THE UNIFIER */
    linear-gradient(to bottom, color-mix(in srgb, var(--bg) 50%, #8a14ff) 0%, #3600f7 100%);

  background-repeat: no-repeat;

  /* Speed: 25s (Slightly slower than 20s to let the colors breathe, 
     but fast enough to feel alive)
  */
  animation: bg-thrash 15s ease-in-out infinite alternate;
}

/* =========================================
   THE "SAFE" HARSH ANIMATION
   Fix: Coordinates are clamped 0-100% to prevent gaps.
   Intensity comes from extreme Zoom (Size) changes.
   ========================================= */
@keyframes bg-thrash {
  /* STATE 1: START */
  0% {
    background-position: 0% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 0%;
    background-size: 150% 150%, 150% 150%, 150% 150%, 150% 150%, 100% 100%;
  }
  
  /* STATE 2: VIOLET EXPLOSION (Top Right layer grows huge) */
  33% {
    /* Positions stay safe (0-100%), but sizing creates the "rush" */
    background-position: 0% 100%, 100% 0%, 50% 100%, 0% 50%, 0% 0%;
    
    /* Layer 1 (Violet) goes 350% - dominates screen */
    background-size: 350% 350%, 120% 120%, 120% 120%, 120% 120%, 100% 100%;
  }
  
  /* STATE 3: CYAN/BLUE RUSH (Bottom layers surge up) */
  66% {
    background-position: 100% 100%, 0% 50%, 50% 0%, 100% 50%, 0% 0%;
    
    /* Layer 3 (Cyan) goes 300%, others shrink to make room */
    background-size: 120% 120%, 120% 120%, 300% 300%, 120% 120%, 100% 100%;
  }

  /* STATE 4: INDIGO CRUNCH (Everything tightens) */
  100% {
    background-position: 50% 50%, 100% 100%, 0% 100%, 100% 0%, 0% 0%;
    background-size: 180% 180%, 180% 180%, 180% 180%, 180% 180%, 120% 120%;
  }
}

/* Light Theme Background */
:root[data-theme="light"] body {
  background-color: #ffffff;
  background-image:
    radial-gradient(1800px 1000px at 70% -15%, rgba(142, 210, 255, 0.87) 0%, rgba(81, 206, 255, 0.616) 55%, transparent 100%),
    radial-gradient(1800px 1000px at 12% 88%, rgba(180, 255, 249, 0.6) 0%, rgba(100, 198, 255, 0.3) 55%, transparent 100%),
    radial-gradient(1700px 920px at 10% 25%, rgba(124, 203, 255, 0.6) 0%, #3766ff8a 55%, transparent 100%),
    /* Light Theme Unifier: White to subtle Blue */
    linear-gradient(to bottom, #ffcafc 0%, #e7b4ff 100%);
    
  background-size: 220% 220%, 220% 220%, 200% 200%, 100% 100%;
}

@keyframes bg-drift {
  0%   { background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%; }
  100% { background-position: 20% 10%, 10% 5%, 5% 10%, 10% 20%, 5% 5%, 0% 0%; }
}

@media (prefers-reduced-motion: reduce) {
  body { animation: none; }
}

/* Utilities */
a { color: var(--brand); text-decoration: none; transition: color 0.2s ease; }
a:hover { text-decoration: none; filter: brightness(1.1); }
.wrap { max-width: 1100px; margin: 0 auto; padding: 28px 20px; }

/* =========================================================
   3. Page Titles & Tools
   ========================================================= */
.page-title h1 {
  margin: 0 0 6px; font-size: 32px;
  background: linear-gradient(135deg, var(--brand), var(--accent));
  -webkit-background-clip: text; color: transparent;
}

.page-cv-title h1 {
  margin: 0 0 16px; font-size: 34px;
  background: linear-gradient(135deg, var(--brand), var(--violet));
  -webkit-background-clip: text; color: transparent;
}

.page-subtitle { color: var(--muted); }

/* Tools (Search, Filters) */
.tools { display: flex; gap: 12px; flex-wrap: wrap; margin: 22px 0; }
.search {
  flex: 1; min-width: 240px; background: var(--search-bg); border: 1px solid var(--search-border);
  border-radius: 999px; padding: 10px 14px; color: var(--text); outline: none;
}
.tag {
  padding: 8px 12px; border-radius: 999px; font-size: 14px; cursor: pointer;
  background: color-mix(in srgb, var(--brand) 12%, #151a25);
  border: 1px solid var(--search-border); color: #cfd6e3;
  transition: all 0.2s ease;
}
:root[data-theme="light"] .tag { background: #ffffff; color: #2b3b6a; }
.tag[data-active="true"] { border-color: var(--brand); filter: brightness(1.1); }

.chip {
  padding: 8px 12px; border-radius: 999px; background: var(--chip-bg); border: 1px solid var(--chip-border);
  color: var(--text); text-decoration: none; box-shadow: var(--shadow); transition: transform .15s ease;
}
.chip:hover { transform: translateY(-2px); }

/* =========================================================
   4. Grid & Cards (Frosted Glass)
   ========================================================= */
.smart-grid {
  display: grid !important;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  gap: 20px; align-items: stretch;
}
.smart-grid > .card { grid-column: span 6; display: flex; flex-direction: column; }
.smart-grid > .card.span-all { grid-column: 1 / -1; }

@media (max-width: 760px) {
  .smart-grid > .card { grid-column: 1 / -1; }
}

.card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px;
  display: flex; flex-direction: column; gap: 10px;
  backdrop-filter: blur(20px) saturate(140%);
  -webkit-backdrop-filter: blur(20px) saturate(140%);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

:root[data-theme="light"] .card {
  background: rgba(255, 255, 255, 0.271);
  border-color: rgba(0,0,0,0.05);
}

.card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2); }
.card.no-hover:hover { transform: none; box-shadow: var(--shadow); }

.card h2 { margin: 0; font-size: 20px; font-weight: 700; }
.card .meta { color: var(--muted); font-size: 14px; }

/* Card Headers & Pills */
.card-head { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.pills { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 4px; }
.pill {
  padding: 4px 8px; border-radius: 999px; font-size: 12px;
  background: var(--pill-bg); border: 1px solid var(--pill-border); color: var(--pill-text);
}

/* Type Coloring */
.card--pub h2 { color: var(--violet); }
.card--proj h2 { color: var(--accent); }

/* =========================================================
   5. Golden Feature Card (CV & Projects)
   ========================================================= */
.card.gold-feature {
  border: 3px solid #ffd700 !important;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.123);
}
.card.gold-feature:hover {
  box-shadow: 0 0px 40px rgba(255, 215, 0, 0.35);
  transform: translateY(-4px);
}

/* =========================================================
   6. Buttons & Links
   ========================================================= */
.links { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 8px; }
.btn, .bubble {
  display: inline-flex; align-items: center; justify-content: center;
  height: var(--action-h); padding: 0 14px; border-radius: calc(var(--action-h)/2);
  font-size: 14px; line-height: 1; text-decoration: none;
}
.btn {
  background: var(--btn-bg); border: 1px solid var(--btn-border); color: var(--btn-text);
  transition: filter 0.15s ease;
}
.btn:hover { filter: brightness(1.1); }
.btn.muted { color: var(--muted); border-style: dashed; opacity: 0.8; cursor: not-allowed; }
.bubble { background: var(--bubble-bg); border: 1px solid var(--bubble-border); color: var(--bubble-text); }
.bubble svg { width: 16px; height: 16px; margin-right: 6px; }

/* Status Indicators */
.status { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; font-size: 12px; }
.status span { font-size: 10px; opacity: 0.9; }
.status.private { background: #2a1f27; border: 1px solid #3a2933; color: #f4b4c0; }
.status.public { background: #1f2a27; border: 1px solid #2f4f39; color: #7ee787; }

:root[data-theme="light"] .status.private { background: #fff3f5; border-color: #ffdbe2; color: #a83c4b; }
:root[data-theme="light"] .status.public { background: #e9fdf0; border-color: #c8f5d6; color: #15803d; }

/* =========================================================
   7. Details & Code
   ========================================================= */
details {
  margin-top: 8px; padding: 8px 10px; border-radius: 8px;
  border: 1px solid var(--details-border); background: var(--details-bg); color: var(--details-text);
}
summary { cursor: pointer; font-weight: 600; font-size: 13px; list-style: none; position: relative; padding-right: 18px; }
summary::-webkit-details-marker { display: none; }
summary::after {
  content: "â–¸"; position: absolute; right: 0; top: 50%; transform: translateY(-50%);
  opacity: 0.7; transition: transform 0.2s ease;
}
details[open] summary::after { transform: translateY(-50%) rotate(90deg); }

pre {
  margin: 10px 0 0; padding: 10px; overflow: auto; border-radius: 8px; font-size: 12px;
  background: var(--code-bg); border: 1px solid var(--code-border); color: var(--code-text);
}

/* =========================================================
   8. CV Page Specifics
   ========================================================= */
/* Background is now handled globally on body, but we can add a CV specific accent if needed */
body.page-cv::before {
  content: ""; position: fixed; inset: 0; z-index: -1; pointer-events: none;
  /* Subtle overlay to make CV text slightly more readable if needed */
  background: rgba(0, 0, 0, 0);
  backdrop-filter: contrast(105%);
}

.cv-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; }
@media (max-width: 1100px) { .cv-grid { grid-template-columns: 1fr; } }

.stack { display: flex; flex-direction: column; gap: 16px; }
.divider { height: 1px; background: var(--line); margin: 10px 0; }

/* =========================================================
   9. Homepage Specifics
   ========================================================= */
.main { display: flex; flex-direction: column; align-items: center; padding: 40px 20px; text-align: center; }
.hero { max-width: 760px; margin-bottom: 36px; }
.hero h1 { font-size: 34px; margin: 0 0 10px; }
.hero p { font-size: 18px; color: var(--muted); margin: 0; }

.home-grid {
  display: grid; gap: 24px; width: 100%; max-width: 1100px;
  grid-template-columns: repeat(4, minmax(220px, 1fr));
  margin-bottom: 40px;
}
@media (max-width: 1100px){ .home-grid{ grid-template-columns:repeat(3, minmax(220px,1fr)); } }
@media (max-width: 900px){  .home-grid{ grid-template-columns:repeat(2, minmax(220px,1fr)); } }
@media (max-width: 520px){  .home-grid{ grid-template-columns:1fr; } }

.home-card {
  background: rgba(255, 255, 255, 0.103);
  border: 0px solid var(--line); border-radius: var(--radius);
  padding: 44px 28px; text-align: center; font-size: 26px; font-weight: 700; color: var(--text);
  text-decoration: none; box-shadow: var(--shadow);
  backdrop-filter: blur(20px) saturate(140%);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
:root[data-theme="light"] .home-card { background: rgba(255, 255, 255, 0.13); }

.home-card:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,0.35); }

.projects span { color: var(--brand); }
.cv span       { color: var(--accent); }
.pubs span     { color: var(--violet); }
.talks span    { color: var(--amber); }
.home-card small { display: block; margin-top: 10px; font-size: 14px; font-weight: 500; color: var(--muted); opacity: 0.9; }

.home-card.talks { cursor: default; pointer-events: none; opacity: 0.8; }
.home-card.talks:hover { transform: none; box-shadow: var(--shadow); }

/* Video Section */
.video-section {
  width: 100%; max-width: 860px; 
  background: rgba(255, 255, 255, 0.1);
  border-radius: var(--radius); 
  border: 0px solid var(--line);
  box-shadow: var(--shadow); padding: 20px; text-align: left;
  backdrop-filter: blur(20px) saturate(140%);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Light Theme Override for Video Section */
:root[data-theme="light"] .video-section {
  background: rgba(255, 255, 255, 0.062);
  backdrop-filter: blur(20px) saturate(140%);
  border-color: rgba(0,0,0,0.05);
}
.video-section h2 { margin: 0 0 16px; font-size: 20px; color: var(--brand); }
.video-placeholder {
  position: relative; width: 100%; aspect-ratio: 16/9;
  border-radius: var(--radius); overflow: hidden; background: #0002;
}
.video-placeholder video { width: 100%; height: 100%; object-fit: cover; display: block; }

/* =========================================================
   10. Footer
   ========================================================= */
footer {
  margin-top: 30px; padding-top: 16px; border-top: 1px solid var(--line);
  color: var(--muted); font-size: 14px; text-align: center;
}